<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>DeLogde</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <link rel='stylesheet' type='text/css' media='screen' href='main.css'>
    <script src='main.js'></script>
</head>
<body>
    <h1>Wellcome to DeLogde</h1>

    <template id="delodge-location">
        <article>
            <h2><slot name="name">Location</slot></h2>
            <section>
                <p><slot name="description">The location was nice, near the station and nice bars.</slot></p>
            </section>
        </article>
        <hr />
    </template>

    <script>
        customElements.define(
            "delodge-location",
            class extends HTMLElement {
                constructor() {
                    super();
                    let template = document.getElementById("delodge-location");
                    let templateContent = template.content;

                    const shadowRoot = this.attachShadow({ mode: "open" });
                    shadowRoot.appendChild(templateContent.cloneNode(true));
                }
            }
        );

        const html = (strings, ...values) => String.raw({ raw: strings }, ...values);
        const DeLogdeLocation = (name, description) => html`<delodge-location>
            <span slot="name">${name}</span>
            <span slot="description">${description}</span>
        </delodge-location>`;
        fetch("/api/locations")
            .then((response) => response.json())
            .then((data) => {
                console.log(data);
                for (const location of (data || [])) {
                    document.body.appendChild(DeLogdeLocation(location?.name, location?.description));
                }
            });
    </script>
    <delodge-location>
        <span slot="name">Name</span>
        <span slot="description">description</span>
    </delodge-location>
</body>
</html>
